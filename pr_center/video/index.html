<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,viewport-fit=cover" />
    <title>홍보센터 | 광고영상</title>
    <meta
      name="description"
      content="모든 것을 에너지로 만드는 친환경 에너지 기업, 천일에너지입니다." />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="천일에너지" />
    <meta
      property="og:description"
      content="모든 것을 에너지로 만드는 친환경 에너지 기업, 천일에너지입니다." />
    <meta
      property="og:image"
      content="https://chunilenergy.com/assets/favicon/apple-icon-152x152.png" />
    <meta
      property="og:url"
      content="https://chunilenergy.com/pr_center/video" />

    <meta
      name="naver-site-verification"
      content="df7339f31fd494555695ae9fe2f1fe504662bd60" />

    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="../../assets/favicon/apple-icon-57x57.png" />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="../../assets/favicon/apple-icon-60x60.png" />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="../../assets/favicon/apple-icon-72x72.png" />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="../../assets/favicon/apple-icon-76x76.png" />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="../../assets/favicon/apple-icon-114x114.png" />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="../../assets/favicon/apple-icon-120x120.png" />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="../../assets/favicon/apple-icon-144x144.png" />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="../../assets/favicon/apple-icon-152x152.png" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../../assets/favicon/apple-icon-180x180.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="../../assets/favicon/android-icon-192x192.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../../assets/favicon/favicon-32x32.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="../../assets/favicon/favicon-96x96.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="../../assets/favicon/favicon-16x16.png" />
    <link rel="manifest" href="../../assets/favicon/manifest.json" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta
      name="msapplication-TileImage"
      content="../../assets/favicon/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />

    <!-- 공통 css -->
    <link rel="stylesheet" href="../../common/common.css" />
    <link rel="stylesheet" href="../../common/footer.css" />
    <link rel="stylesheet" href="../../common/header.css" />
    <link rel="stylesheet" href="../../common/sitemap.css" />
    <!-- 페이지 css -->
    <link rel="stylesheet" href="../pr_center_common.css" />

    <!-- Link aos CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <!-- Link Jquery -->
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <!-- version -->
    <script type="text/javascript" src="/scripts/common.js?v=1.1"></script>
  </head>

  <body>
    <!-- header -->
    <header id="header" class="active"></header>

    <!-- sitemap (사이트맵) -->
    <div id="sitemap"></div>

    <!-- loading indicator -->
    <div id="overlay">
      <div class="cv-spinner">
        <span class="spinner"></span>
      </div>
    </div>

    <div class="body">
      <div class="page_container container">
        <!-- 광고영상 title & img -->
        <div class="page_title_wrap">
          <p class="title" data-aos="fade-up" data-aos-duration="500">
            광고영상
          </p>
          <p class="sub_title" data-aos="fade-up" data-aos-duration="500">
            천일에너지의 모든 최신 소식들을 전해 드립니다.
          </p>
        </div>

        <!-- 광고영상 페이지 경로 -->
        <div class="page_path_wrap flex justify_end align_center">
          <span>HOME</span>
          <img
            class="ico_arrow"
            src="../../assets/ico_right_breadcrumb.svg"
            alt=">" />
          <span>홍보센터</span>
          <img
            class="ico_arrow"
            src="../../assets/ico_right_breadcrumb.svg"
            alt=">" />
          <span>광고영상</span>
        </div>

        <!-- 광고영상 contents -->
        <div class="content_wrap">
          <!-- 홍보센터 tab list + 검색창 -->
          <div class="content_top_wrap flex justify_space_between align_center">
            <div class="pr_center_tab_list flex justify_start align_center">
              <a href="../press/">
                <div
                  class="pr_center_tab flex justify_center align_center hover">
                  보도자료
                </div>
              </a>
              <div
                class="pr_center_tab flex justify_center align_center active">
                광고영상
              </div>
              <a href="../notice/">
                <div
                  class="pr_center_tab flex justify_center align_center hover">
                  공지사항
                </div>
              </a>
            </div>
            <div class="serach_wrap input_wrap">
              <input
                id="serach"
                type="text"
                class="input"
                placeholder="검색어를 입력해주세요" />
            </div>
          </div>

          <!-- 목록 -->
          <div
            class="pc_content_list content_list flex justify_start align_start">
            <!-- <a class="content_item" href="https://www.youtube.com/watch?v=BMQLz2gUGoY" target="_blank">
                        <img class="block_drag" src="./assets/video/video_1_compressed.jpg" alt="1" />
                        <p class="tilte left">[천일서비스] 인테리어의 시작! 철거 후 2.5톤 폐기물 수거</p>
                        <p class="date_text left">2023.09.18</p>
                    </a> -->
          </div>
          <div
            class="mo_content_list content_list flex justify_start align_start"></div>

          <!-- 더보기 버튼 -->
          <button
            type="button"
            id="more_info"
            class="more_info flex justify_center align_center text_16 mid hover"
            style="display: none">
            더보기
            <img src="../assets/ico_down.svg" alt="더보기 아이콘" />
          </button>
        </div>
      </div>

      <!-- footer -->
      <footer></footer>
    </div>

    <script src="../../common/initElements.js"></script>

    <script src="../../common/footer.js"></script>
    <script src="../../common/header.js"></script>
    <script src="../../common/common.js"></script>

    <!-- AOS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init();
    </script>

    <script>
      const isProd = location.host === "chunilenergy.com";
      const apiBaseUrl = isProd
        ? "https://backend.soogobot.com"
        : "https://backend-dev.soogobot.com";
      var countOfRow = 3;
      var moCountOfRow = 2;

      const numberOfPage = 6;
      var currentPage = 1;
      var totalCount = 0;
      var videoApiList = [];
      var hasNext = false;

      const queryParams = new URLSearchParams(window.location.search);
      var search = queryParams.get("search");

      function resizeFunction() {
        var isMoblile = isBreakPoint(870);
        if (isMoblile) {
          $(".pc_content_list").hide();
          $(".mo_content_list").show();
        } else {
          $(".pc_content_list").show();
          $(".mo_content_list").hide();
        }
      }

      $(document).ready(function () {
        $("#serach").val(search);

        $("#serach").keyup(function (event) {
          if (event.which === 13) {
            event.preventDefault();
            search = $("#serach").val();

            var searchParams = new URLSearchParams(window.location.search);
            searchParams.set("search", search);
            location.search = searchParams.toString();
          }
        });

        requestVideoList(search);
      });

      /** 더보기 버튼 클릭 시 */
      $("#more_info").click(function () {
        if (hasNext) {
          currentPage += 1;
          requestVideoList(search);
        }
      });

      // list 호출
      function requestVideoList(searchText) {
        $("#overlay").fadeIn(300);
        $("#more_info").hide();
        const searchQuery = searchText == null ? "" : `&search=${searchText}`;
        $.ajax({
          url:
            `${apiBaseUrl}/api/homepage/promotion/video/?page=${currentPage}&page_size=${numberOfPage}` +
            searchQuery,
          type: "GET",
          contentType: "application/json; charset=utf-8",
          datatype: "json",
          success: function (data) {
            videoList = data.results;
            totalCount = data.count;
            hasNext = data.next;

            // 더보기 버튼 hidden 처리
            if (hasNext == null) {
              $("#more_info").hide();
            } else {
              $("#more_info").show();
            }

            $(document).ready(function () {
              var resizeTimeout;

              // 리사이즈 이벤트 리스너
              $(window).on("resize", function () {
                // 기존에 설정된 리사이즈 타이머를 취소
                cancelAnimationFrame(resizeTimeout);
                // 새로운 리사이즈 타이머 설정
                resizeTimeout = requestAnimationFrame(resizeFunction);
              });

              resizeFunction();

              /** 광고영상 리스트 렌더 */
              const renderList = [...videoList];
              const moRenderList = [...videoList];
              const listLength = videoList.length;

              if (!(listLength % countOfRow === 0)) {
                var emptyElCount = countOfRow - (listLength % countOfRow);
                for (var i = 0; i < emptyElCount; i++) {
                  renderList.push({ date: "", title: "", link: "" });
                }
              }
              if (!(listLength % moCountOfRow === 0)) {
                var emptyElCount = moCountOfRow - (listLength % moCountOfRow);
                for (var i = 0; i < emptyElCount; i++) {
                  moRenderList.push({ date: "", title: "", link: "" });
                }
              }

              if (listLength === 0) {
                $(".pc_content_list").append(
                  `<p  class="gray3 mid text_14 center no_data">
                    광고영상이 없습니다.
                  </p>`
                );
                $(".mo_content_list").append(
                  `<p class="gray3 mid text_14 center no_data">
                    광고영상이 없습니다.
                  </p>`
                );
              }

              renderList.map((item, index) => {
                var isEmbed = item.video_embed_url;
                if (isEmbed) {
                  if (item.date === "") {
                    $(".pc_content_list").append(
                      `<div class="content_item empty_item">
                        <img
                            class="block_drag"
                            alt="empty"
                            width="380"
                            height="220" />
                      </div>`
                    );
                  } else {
                    $(".pc_content_list").append(
                      `<div class="content_item">
                        <div class="img_wrap flex justify_center align_center" style="margin: 0 auto">
                        <iframe 
                            src="${item.video_embed_url}"                            
                            width="100%" 
                            height="220"                                 
                            frameborder="0"
                            loading="lazy"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            referrerpolicy="strict-origin-when-cross-origin" 
                            allowfullscreen
                        />
                        </div>
                        <p class="tilte left">${item.title}</p>
                        <p class="date_text left">${item.posted_datetime}</p>
                      </div>`
                    );
                  }
                } else {
                  $(".pc_content_list").append(
                    `<a class="content_item video_item ${
                      item?.date === "" ? "empty_item" : ""
                    }" href="${item.external_link}" target="_blank">
                    <div class="img_wrap flex justify_center align_center">
                        <img 
                            class="block_drag" 
                            src="${item.thumbnail_file?.file}" 
                            alt="${index + 1}" width="100%" height="220" 
                        />                      
                    </div>
                    <p class="tilte left">${item.title}</p>
                    <p class="date_text left">${item.posted_datetime}</p>
                </a>`
                  );
                }
              });

              moRenderList.map((item, index) => {
                var isEmbed = item.video_embed_url;
                if (isEmbed) {
                  $(".mo_content_list").append(
                    `<div class="content_item ${
                      item?.date === "" ? "empty_item" : ""
                    }">
                    <div class="img_wrap flex justify_center align_center" style="margin: 0 auto">
                        <iframe 
                            class=""
                            src="${item.video_embed_url}"
                            width="100%"
                            height="220"
                            loading="lazy"
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            referrerpolicy="strict-origin-when-cross-origin" 
                            allowfullscreen
                        />
                    </div>
                    <p class="tilte left">${item.title}</p>
                    <p class="date_text left">${item.posted_datetime}</p>
                </div>`
                  );
                } else {
                  $(".mo_content_list").append(
                    `<a class="content_item video_item ${
                      item?.date === "" ? "empty_item" : ""
                    }" href="${item.external_link}" target="_blank">
                    <div class="img_wrap flex justify_center align_center">
                        <img 
                            class="block_drag" 
                            src="${item.thumbnail_file?.file}" 
                            alt="${index + 1}" 
                        />                      
                    </div>
                    <p class="tilte left">${item.title}</p>
                    <p class="date_text left">${item.posted_datetime}</p>
                </a>`
                  );
                }
              });
            });
            $("#overlay").fadeOut(300);
          },
          error: function (error) {
            console.log(error);
            $("#overlay").fadeOut(300);
          },
        });
      }
    </script>
  </body>
</html>
