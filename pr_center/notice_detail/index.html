<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,viewport-fit=cover" />
    <title>홍보센터 | 공지사항 상세</title>
    <meta
      name="description"
      content="모든 것을 에너지로 만드는 친환경 에너지 기업, 천일에너지입니다." />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="천일에너지" />
    <meta
      property="og:description"
      content="모든 것을 에너지로 만드는 친환경 에너지 기업, 천일에너지입니다." />
    <meta
      property="og:image"
      content="https://chunilenergy.com/assets/favicon/apple-icon-152x152.png" />
    <meta
      property="og:url"
      content="https://chunilenergy.com/pr_center/notice_detail" />

    <meta
      name="naver-site-verification"
      content="df7339f31fd494555695ae9fe2f1fe504662bd60" />

    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="../../assets/favicon/apple-icon-57x57.png" />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="../../assets/favicon/apple-icon-60x60.png" />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="../../assets/favicon/apple-icon-72x72.png" />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="../../assets/favicon/apple-icon-76x76.png" />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="../../assets/favicon/apple-icon-114x114.png" />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="../../assets/favicon/apple-icon-120x120.png" />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="../../assets/favicon/apple-icon-144x144.png" />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="../../assets/favicon/apple-icon-152x152.png" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../../assets/favicon/apple-icon-180x180.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="../../assets/favicon/android-icon-192x192.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../../assets/favicon/favicon-32x32.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="../../assets/favicon/favicon-96x96.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="../../assets/favicon/favicon-16x16.png" />
    <link rel="manifest" href="../../assets/favicon/manifest.json" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta
      name="msapplication-TileImage"
      content="../../assets/favicon/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />

    <!-- 공통 css -->
    <link rel="stylesheet" href="../../common/common.css" />
    <link rel="stylesheet" href="../../common/footer.css" />
    <link rel="stylesheet" href="../../common/header.css" />
    <link rel="stylesheet" href="../../common/sitemap.css" />
    <!-- 페이지 css -->
    <link rel="stylesheet" href="../pr_center_common.css" />
    <link rel="stylesheet" href="notice_detail.css" />

    <!-- Link aos CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <!-- Link Jquery -->
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
  </head>

  <body>
    <!-- header -->
    <header id="header" class="active"></header>

    <div id="overlay">
      <div class="cv-spinner">
        <span class="spinner"></span>
      </div>
    </div>

    <!-- sitemap (사이트맵) -->
    <div id="sitemap"></div>

    <div class="body">
      <div class="page_container container">
        <!-- 공지사항 상세 contents -->
        <div class="detail_wrap">
          <div class="content_wrap">
            <div class="go_back_wrap text_16 mid">
              <a href="../notice" class="hover flex justify_start align_center">
                <img src="./assets/ico_back.svg" alt="돌아가기" />
                LIST
              </a>
            </div>

            <div class="title_wrap">
              <p class="mini_title left blue text_18 semi_bold">공지사항</p>
              <p id="notice_title" class="title left black3 mid">-</p>
              <!-- <p id="notice_date" class="date left text_16 mid">2000.00.00</p> -->
            </div>
            <!-- <div class="image_wrap">
              <img id="notice_image" src="" alt="본문 이미지" />
            </div> -->
            <div
              id="notice_content"
              class="desc_wrap"
              style="white-space: pre-line"></div>

            <div class="notice_sequence">
              <div
                id="notice_prev_sequence"
                class="sequence flex justify_start align_start hover"
                style="cursor: pointer">
                <p class="black3 text_18 mid left">이전글</p>
                <p class="notice_title text_18 left">-</p>
              </div>
              <div
                id="notice_next_sequence"
                class="sequence flex justify_start align_start hover"
                style="cursor: pointer">
                <p class="black3 text_18 mid left">다음글</p>
                <p class="notice_title text_18 left">-</p>
              </div>
            </div>

            <!-- 목록보기 버튼 -->
            <button
              type="button"
              id="go_to_list"
              class="more_info flex justify_center align_center text_16 mid hover">
              목록보기
            </button>
          </div>
        </div>
      </div>

      <!-- footer -->
      <footer></footer>
    </div>

    <script src="../../common/initElements.js"></script>
    <script src="../../common/footer.js"></script>
    <script src="../../common/header.js"></script>
    <script src="../../common/common.js"></script>

    <!-- AOS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init();
    </script>

    <script>
      const queryParams = new URLSearchParams(window.location.search);
      const id = queryParams.get("id");

      if (id == null) {
        alert("잘못된 접근 입니다.");
        window.location.href = "../notice";
      }

      $(window).ready(function () {
        $("#go_to_list").on("click", function (e) {
          window.location.href = "../notice";
        });

        if (id) {
          requestNoticeDetail();
        }
      });

      function requestNoticeDetail() {
        $("#overlay").fadeIn(300);

        $.ajax({
          url: `http://192.168.12.22:8000/api/homepage/promotion/notice/detail/${id}`,
          type: "GET",
          contentType: "application/json; charset=utf-8",
          datatype: "json",
          success: function (data) {
            console.log(data);

            $(document).ready(function () {
              console.log($("#notice_title"));
              // 2024.10.31 이상하, 공지사항 상세 데이터가 일단 없고
              // html 에디터가 아직 나오지 않아 임시처리만 함.
              if (data.title) {
                $("#notice_title").text(data.title);
              } else {
                $("#notice_title").hide();
              }

              // $("#notice_image").attr("src", data.image_path);
              $("#notice_content").append(data.content_html);
              // $("#notice_date").text(data.registered_at);

              var nextPage = data.next_id;
              var prevPage = data.prev_id;

              // todo 이전 글 / 다음 글 구현하기

              if (prevPage == null) {
                $("#notice_prev_sequence").hide();
              } else {
                $("#notice_prev_sequence")
                  .children(".notice_title")
                  .text(data.prev_title);

                $("#notice_prev_sequence").on("click", function () {
                  console.log("prevClick");
                  window.location.href = `.?id=${prevPage}`;
                });
              }

              if (nextPage == null) {
                $("#notice_next_sequence").hide();
              } else {
                $("#notice_next_sequence")
                  .children(".notice_title")
                  .text(data.next_title);

                $("#notice_next_sequence").on("click", function () {
                  console.log("nextClick");
                  window.location.href = `.?id=${nextPage}`;
                });
              }

              $("#overlay").fadeOut(300);
            });
          },
          error: function (error) {
            console.log(error);
            $("#overlay").fadeOut(300);
            alert("오류가 발생했습니다.");
          },
        });
      }
    </script>
  </body>
</html>
