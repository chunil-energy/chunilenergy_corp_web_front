<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,viewport-fit=cover" />
    <title>홍보센터 | 공지사항</title>
    <meta
      name="description"
      content="모든 것을 에너지로 만드는 친환경 에너지 기업, 천일에너지입니다." />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="천일에너지" />
    <meta
      property="og:description"
      content="모든 것을 에너지로 만드는 친환경 에너지 기업, 천일에너지입니다." />
    <meta
      property="og:image"
      content="https://chunilenergy.com/assets/favicon/apple-icon-152x152.png" />
    <meta
      property="og:url"
      content="https://chunilenergy.com/pr_center/notice" />

    <meta
      name="naver-site-verification"
      content="df7339f31fd494555695ae9fe2f1fe504662bd60" />

    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="../../assets/favicon/apple-icon-57x57.png" />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="../../assets/favicon/apple-icon-60x60.png" />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="../../assets/favicon/apple-icon-72x72.png" />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="../../assets/favicon/apple-icon-76x76.png" />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="../../assets/favicon/apple-icon-114x114.png" />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="../../assets/favicon/apple-icon-120x120.png" />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="../../assets/favicon/apple-icon-144x144.png" />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="../../assets/favicon/apple-icon-152x152.png" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../../assets/favicon/apple-icon-180x180.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="../../assets/favicon/android-icon-192x192.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../../assets/favicon/favicon-32x32.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="../../assets/favicon/favicon-96x96.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="../../assets/favicon/favicon-16x16.png" />
    <link rel="manifest" href="../../assets/favicon/manifest.json" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta
      name="msapplication-TileImage"
      content="../../assets/favicon/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />

    <!-- 공통 css -->
    <link rel="stylesheet" href="../../common/common.css" />
    <link rel="stylesheet" href="../../common/footer.css" />
    <link rel="stylesheet" href="../../common/header.css" />
    <link rel="stylesheet" href="../../common/sitemap.css" />
    <!-- 페이지 css -->
    <link rel="stylesheet" href="../pr_center_common.css" />
    <link rel="stylesheet" href="notice.css" />

    <!-- Link aos CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <!-- Link Jquery -->
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
  </head>

  <body>
    <!-- header -->
    <header id="header" class="active"></header>

    <!-- sitemap (사이트맵) -->
    <div id="sitemap"></div>

    <div class="body">
      <div class="page_container container">
        <!-- 공지사항 title & img -->
        <div class="page_title_wrap">
          <p class="title" data-aos="fade-up" data-aos-duration="500">
            공지사항
          </p>
          <p class="sub_title" data-aos="fade-up" data-aos-duration="500">
            천일에너지의 모든 최신 소식들을 전해 드립니다.
          </p>
        </div>

        <!-- 공지사항 페이지 경로 -->
        <div class="page_path_wrap flex justify_end align_center">
          <span>HOME</span>
          <img
            class="ico_arrow"
            src="../../assets/ico_right_breadcrumb.svg"
            alt=">" />
          <span>홍보센터</span>
          <img
            class="ico_arrow"
            src="../../assets/ico_right_breadcrumb.svg"
            alt=">" />
          <span>공지사항</span>
        </div>

        <!-- 공지사항 contents -->
        <div class="content_wrap">
          <!-- 홍보센터 tab list + 검색창 -->
          <div class="content_top_wrap flex justify_space_between align_center">
            <div class="pr_center_tab_list flex justify_start align_center">
              <a href="../press/">
                <div
                  class="pr_center_tab flex justify_center align_center hover">
                  보도자료
                </div>
              </a>
              <a href="../video/">
                <div
                  class="pr_center_tab flex justify_center align_center hover">
                  광고영상
                </div>
              </a>
              <div
                class="pr_center_tab flex justify_center align_center active">
                공지사항
              </div>
            </div>
            <div class="serach_wrap input_wrap">
              <input
                id="serach"
                type="text"
                class="input"
                placeholder="검색어를 입력해주세요" />
            </div>
          </div>

          <!-- 목록 -->
          <div
            class="notice_list flex flex_col justify_start align_stretch"></div>

          <!-- 페이지네이션 -->
          <div class="pagination_wrap flex justify_center align_center">
            <button id="prev" class="arrow_button hover">
              <img src="./assets/ico_left.svg" alt="이전" />
            </button>
            <div class="page_list">
              <!-- 
              <span class="page mid justify_center align_center active">1</span>
              <span class="page mid justify_center align_center">2</span>
              <span class="page mid justify_center align_center">3</span>
              <span class="page mid justify_center align_center">4</span>
              <span class="page mid justify_center align_center">5</span> -->
            </div>
            <button id="next" class="arrow_button hover">
              <img src="./assets/ico_right.svg" alt="다음" />
            </button>
          </div>
        </div>
      </div>

      <!-- footer -->
      <footer></footer>
    </div>

    <script src="../../common/initElements.js"></script>
    <script src="../../common/footer.js"></script>
    <script src="../../common/header.js"></script>
    <script src="../../common/common.js"></script>

    <!-- AOS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init();
    </script>

    <script>
      const isProd = location.host === "chunilenergy.com";
      const apiBaseUrl = isProd
        ? "https://backendv.soogobot.com"
        : "https://backend-dev.soogobot.com";
      const numberOfPage = 2;
      var pageSize = 1;
      var currentPage = 1;
      var noticeList = [];
      var hasNext = false;
      var hasPrev = false;

      const queryParams = new URLSearchParams(window.location.search);
      var search = queryParams.get("search");

      $(document).ready(function () {
        $("#serach").val(search);

        $("#serach").keyup(function (event) {
          if (event.which === 13) {
            event.preventDefault();
            search = $("#serach").val();

            var searchParams = new URLSearchParams(window.location.search);
            searchParams.set("search", search);
            location.search = searchParams.toString();
          }
        });

        requestNoticeList(search);
      });

      function requestNoticeList(searchText) {
        $.ajax({
          url: `${apiBaseUrl}/api/homepage/promotion/notice/?page_num=${currentPage}&page_size=${pageSize}$searc=${search}`,
          type: "GET",
          contentType: "application/json; charset=utf-8",
          datatype: "json",
          success: function (data) {
            noticeList = data.results;
            pageSize = data.count / numberOfPage;

            $(document).ready(function () {
              /** 보도자료 리스트 렌더 */
              const reverseList = [...noticeList].reverse();
              const listLength = reverseList.length;

              if (!(reverseList.length % 3 === 0)) {
                var emptyElCount = 3 - (noticeList.length % 3);
                for (var i = 0; i < emptyElCount; i++) {
                  reverseList.push({ date: "", title: "", link: "" });
                }
              }

              if (reverseList.length === 0) {
                $(".notice_list").append(
                  `<p id="empty_notice" class="gray3 mid text_14 center" style="padding-top: 44px">
                    공지사항이 없습니다.
                  </p>`
                );

                $(".page_list").append(
                  `<span class="page mid justify_center align_center active"> 1
                   </span>`
                );
              }

              reverseList.map((item, index) => {
                $(".notice_list").has("#empty_notice").remove();
                $(".notice_list").append(
                  `<a class="notice_item ${
                    item?.date === "" ? "empty_item" : ""
                  }"
                          id="${item.id}"
                          href="../../pr_center/notice_detail/?id=${item.id}"
                      >
                          <p class="tilte left">
                              ${item.title}
                          </p>
                          <p class="date_text left">${item.registered_at}</p>
                      </a>`
                );
              });

              for (let index = 0; index < pageSize; index++) {
                $(".page_list").append(
                  `<span class="page mid justify_center align_center active"> ${
                    index + 1
                  } </span>`
                );
              }
            });
          },
          error: function (error) {
            console.log(error);
          },
        });
      }
    </script>
  </body>
</html>
